import http from 'k6/http';
import { check, sleep } from 'k6';

// โ๏ธ ุฅุนุฏุงุฏุงุช ุงููุฌูู
export const options = {
    // ุนุฏุฏ ุงูููุฒุฑุฒ ุงููููููู (ุงูุฌูุด ุจุชุงุนู)
    vus: 200,

    // ูุฏุฉ ุงููุฌูู
    duration: '30s',

    // (ุงุฎุชูุงุฑู) ุดุฑูุท ุงููุฌุงุญ: ูุงุฒู 95% ูู ุงูุทูุจุงุช ุชุฎูุต ูู ุฃูู ูู ูุต ุซุงููุฉ
    thresholds: {
        http_req_duration: ['p(95)<500'],
    },
};

export default function () {
    // ๐ ุญุท ููุง ุฑุงุจุท ุงููููุน ุจุชุงุนู (Preview Link)
    // ุชุฃูุฏ ุฅูู ูุดุบู ุงููููุน ุจู npm run preview ุงูุฃูู
    const res = http.get('http://127.0.0.1:4173');

    // ุจูุฑุงุฌุน ูู ุงููููุน ุฑุฏ ุจู "ุชูุงู" (200 OK) ููุง ููุนุ
    check(res, { 'status was 200': (r) => r.status == 200 });

    // ูู ููุฒุฑ ูุณุชูู ุซุงููุฉ ูุจู ูุง ูุนูู ุฑููุฑุด ุชุงูู (ุนุดุงู ูุญุงูู ุงูุณููู ุงูุจุดุฑู)
    sleep(1);
}